extends layout

block functions
  -
    function prettyDate(dateString) {
      if (dateString) {
        var date = new Date(dateString);
        var d = date.getDate();
        var m = date.getMonth()+1;
        var y = date.getFullYear();
        return d+'.'+m+'.'+y;
      } else {
        return '-';
      }
    }

block content
  h1= title

  if loggedIn
    include newtask
  else
    p #[a(data-toggle='modal' href='#login') Log in] to add or remove tasks

  table(class='table')
    tr
      th= 'Title'
      th= 'Last completed'
      th

    each task in tasks
      tr
        td= task.title
        td #{prettyDate(task.lastCompleted)}
        td
          div(class='btn-group' role='group')
            if loggedIn
              button#removeBtn(type='button' class='btn btn-danger' onClick='removeTask(' + task.id + ')' aria-label='Remove')
                i(class='fas fa-trash')
            button#completeBtn(type='button' class='btn btn-primary' onClick='completeTask(' + task.id + ')') Complete
